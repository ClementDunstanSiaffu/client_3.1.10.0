!function(t,r){"use strict";var n={};t.PubSub?(n=t.PubSub,console.warn("PubSub already loaded, using existing version")):(t.PubSub=n,function(t){var r={},n=-1;function e(t,r,n){try{t(r,n)}catch(t){setTimeout(function(t){return function(){throw t}}(t),0)}}function o(t,r,n){t(r,n)}function i(t,n,i,u){var c,s=r[n],f=u?o:e;if(Object.prototype.hasOwnProperty.call(r,n))for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&f(s[c],t,i)}function u(t){var n=String(t);return Boolean(Object.prototype.hasOwnProperty.call(r,n)&&function(t){var r;for(r in t)if(Object.prototype.hasOwnProperty.call(t,r))return!0;return!1}(r[n]))}function c(t,r,n,e){var o=function(t,r,n){return function(){var e=String(t),o=e.lastIndexOf(".");for(i(t,t,r,n);-1!==o;)o=(e=e.substr(0,o)).lastIndexOf("."),i(t,e,r,n);i(t,"*",r,n)}}(t="symbol"==typeof t?t.toString():t,r,e);return!!function(t){for(var r=String(t),n=u(r)||u("*"),e=r.lastIndexOf(".");!n&&-1!==e;)e=(r=r.substr(0,e)).lastIndexOf("."),n=u(r);return n}(t)&&(!0===n?o():setTimeout(o,0),!0)}t.publish=function(r,n){return c(r,n,!1,t.immediateExceptions)},t.publishSync=function(r,n){return c(r,n,!0,t.immediateExceptions)},t.subscribe=function(t,e){if("function"!=typeof e)return!1;t="symbol"==typeof t?t.toString():t,Object.prototype.hasOwnProperty.call(r,t)||(r[t]={});var o="uid_"+String(++n);return r[t][o]=e,o},t.subscribeAll=function(r){return t.subscribe("*",r)},t.subscribeOnce=function(r,n){var e=t.subscribe(r,(function(){t.unsubscribe(e),n.apply(this,arguments)}));return t},t.clearAllSubscriptions=function(){r={}},t.clearSubscriptions=function(t){var n;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&0===n.indexOf(t)&&delete r[n]},t.countSubscriptions=function(t){var n,e,o=0;for(n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&0===n.indexOf(t)){for(e in r[n])o++;break}return o},t.getSubscriptions=function(t){var n,e=[];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&0===n.indexOf(t)&&e.push(n);return e},t.unsubscribe=function(n){var e,o,i,u="string"==typeof n&&(Object.prototype.hasOwnProperty.call(r,n)||function(t){var n;for(n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&0===n.indexOf(t))return!0;return!1}(n)),c=!u&&"string"==typeof n,s="function"==typeof n,f=!1;if(!u){for(e in r)if(Object.prototype.hasOwnProperty.call(r,e)){if(o=r[e],c&&o[n]){delete o[n],f=n;break}if(s)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&o[i]===n&&(delete o[i],f=!0)}return f}t.clearSubscriptions(n)}}(n)),"object"==typeof exports?(void 0!==module&&module.exports&&(exports=module.exports=n),exports.PubSub=n,module.exports=exports=n):"function"==typeof define&&define.amd&&define((function(){return n}))}("object"==typeof window&&window||this);