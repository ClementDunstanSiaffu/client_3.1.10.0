import D from"./dbgLog";export class GeometryUtil{static getRings(e,t,i,s){if(!s||s.length<=0||s.length>3||"miles"!=i&&"kilometers"!=i||!e||!t)throw console.log("GeometryUtil: invalid args",e,t,s),"GeometryUtil: invalid args";parseFloat(e),parseFloat(t);let a=[];for(let r=0;r<s.length;r++){let l=this.getAnalysisAreaRings(e,t,i,s,r);a.push(l)}return a}static i18n(e){return e}static getAnalysisAreaRings(e,t,i,s,a){if(!e||!t||null==i||!s||s.length<0||s.length>3)throw s;let r=1==s[a]?"miles"==i?GeometryUtil.i18n("mile"):GeometryUtil.i18n("kilometer"):"miles"==i?GeometryUtil.i18n("miles"):GeometryUtil.i18n("kilometers");function l(){let e="miles"==i?" "+GeometryUtil.i18n("mile"):" "+GeometryUtil.i18n("kilometer");return"Ring: "+s[a]+e+" radius"}function o(){return s[a]+" "+r}function n(){return s[a]+" "+r}let A={feature:{geometry:{rings:[]},attributes:{RING:a+1,DESCRIPTION:"",latitude:e,longitude:t,name:o(),shortName:n(),description:l(),symbol:{color:[204,51,0,128],outline:{color:[204,51,0,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"}}},latitude:e,longitude:t,location:{geometry:{x:t,y:e,spatialReference:{wkid:4326}},symbol:{type:"esriPMS",width:14,height:26.6,xoffset:0,yoffset:12.6,contentType:"image/png",imageData:"iVBORw0KGgoAAAANSUhEUgAAABMAAAAjCAYAAAB2KjFhAAACtUlEQVRIS+2WS0wTURSG/zvT0kpfkGJ4pGCViA1Em9CtCQVx5QIWhiVRo8GdSNypqHElkcgOlzVh5ap1X6nEiAkQXzGBxkSKtZC0jdTSB7SdMXdwRjudB+w5q5t7T775z3/OzR0CWbT4x90Glh0CMEx43g1C3FIKz6/zhKwDCJYrldBWZIaupSDiqsE/3mBjmGeMyXLF7GiBubEVhmN2sIY6KblS3kO58BvFX5soZrbA7eYCWY67vR2Z2aZJAoyqMTLMvLXN47a1eeRiUSrmUSrmhHSGNYA11oGtMyO3FcVOYnW9xHH9VKUAcw1MfHSc9HktzvYaEN34B6suymSxCwozsQ+ReHi6n7gG7/iNZvv88W6/Ikgdtl+Y2d6I5NfXqJQK/cQ1MPHQ1uZ5oFSeSFdWtn9Ky93b/olsYvURhUWcXef7TPamGmWXfM3oPeVAi8OIeDKLpWgSrxY3qvIY1gjCl5GOvn2jCLOaWUyN9sDX6aj5wNJaErdm3yNbKAlnurCp0W709ThVPQy+i+H+ixV92OlWC+bGe1VB4sHlx2GsxTPayqhPkyNdurB7gRWEFmPasBsXT+D6YIcu7MnLz5gLf9OG0e7Njp3ThV2bXsBSNKUNo518ftML6p1aUK+oZwfqJgVRIAXLg47E1acLgvkHgtGk1kYTJkfOCEMrxnI0hbuBZSTSeWlPd87kaprqeWwkUopVHxqmdTePYMqTdeRZ9d1svzARtLnODlmbO1XvoqpnhMBkaUAhHUM2/iVE6ONrZZjIoZ+6v6BiZhOZ7yufdjjOL7ybesAaZQog+qpX/R6oKayCqYCoKAmmpVCCaYBqYGpAAbabF8z+3yPxh0XsXJUycVPuYWm3IIyAFkhRmRowl/4hdU2uSFOZHFjv7PDm0xtC+9VAmspkwOAOxw1rgWj+H4uVH6hj08HSAAAAAElFTkSuQmCC"}},name:o(),address:"",shortName:n(),locationName:o(),description:l()};return A.feature.geometry.rings.push(this._generateRing(e,t,i,s[a])),A}static getAnalysisAreasFromRings(e){var t={analysisAreas:[]};for(let i=0;i<e.length;i++){let s=e[i],a="minutes"==s.units.toLowerCase(),r=(s.value,s.units.toLowerCase()),l=a?"minutes":r.indexOf("miles")>=0?"miles":"kilometers",o=l.substr(0,l.length-1),n=s.value.toString()+" "+o+" "+s.transport,A=a?" Time: ":" Distance: ",S=s.value.toString()+" "+(1==s.value)?o:l,g=("drive"==s.transport?"Drive":"Walk")+A+S,u={feature:{geometry:{rings:s.rings,spatialReference:{wkid:4326}},attributes:{RING:i,SYMBOL:{color:[204,51,0,128],outline:{color:[204,51,0,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"}}},latitude:s.latitude,longitude:s.longitude,name:"",address:"",shortName:n,locationName:"",description:g,location:{geometry:{x:s.longitude,y:s.latitude,spatialReference:{wkid:"4326"}},symbol:{type:"esriPMS",width:14,height:26.6,xoffset:0,yoffset:12.6,contentType:"image/png",imageData:"iVBORw0KGgoAAAANSUhEUgAAABMAAAAjCAYAAAB2KjFhAAACtUlEQVRIS+2WS0wTURSG/zvT0kpfkGJ4pGCViA1Em9CtCQVx5QIWhiVRo8GdSNypqHElkcgOlzVh5ap1X6nEiAkQXzGBxkSKtZC0jdTSB7SdMXdwRjudB+w5q5t7T775z3/OzR0CWbT4x90Glh0CMEx43g1C3FIKz6/zhKwDCJYrldBWZIaupSDiqsE/3mBjmGeMyXLF7GiBubEVhmN2sIY6KblS3kO58BvFX5soZrbA7eYCWY67vR2Z2aZJAoyqMTLMvLXN47a1eeRiUSrmUSrmhHSGNYA11oGtMyO3FcVOYnW9xHH9VKUAcw1MfHSc9HktzvYaEN34B6suymSxCwozsQ+ReHi6n7gG7/iNZvv88W6/Ikgdtl+Y2d6I5NfXqJQK/cQ1MPHQ1uZ5oFSeSFdWtn9Ky93b/olsYvURhUWcXef7TPamGmWXfM3oPeVAi8OIeDKLpWgSrxY3qvIY1gjCl5GOvn2jCLOaWUyN9sDX6aj5wNJaErdm3yNbKAlnurCp0W709ThVPQy+i+H+ixV92OlWC+bGe1VB4sHlx2GsxTPayqhPkyNdurB7gRWEFmPasBsXT+D6YIcu7MnLz5gLf9OG0e7Njp3ThV2bXsBSNKUNo518ftML6p1aUK+oZwfqJgVRIAXLg47E1acLgvkHgtGk1kYTJkfOCEMrxnI0hbuBZSTSeWlPd87kaprqeWwkUopVHxqmdTePYMqTdeRZ9d1svzARtLnODlmbO1XvoqpnhMBkaUAhHUM2/iVE6ONrZZjIoZ+6v6BiZhOZ7yufdjjOL7ybesAaZQog+qpX/R6oKayCqYCoKAmmpVCCaYBqYGpAAbabF8z+3yPxh0XsXJUycVPuYWm3IIyAFkhRmRowl/4hdU2uSFOZHFjv7PDm0xtC+9VAmspkwOAOxw1rgWj+H4uVH6hj08HSAAAAAElFTkSuQmCC"}}};t.analysisAreas.push(u)}let i=JSON.stringify(t).replace('{"analysisAreas"','"analysisAreas"');return i.substr(0,i.length-1)}static getAnalysisAreasFromPolygon(e){if(!(e&&e.rings&&e.spatial&&e.latitude&&e.longitude))return D.log("getAnalysisAreasFromPolygon","invalid args",e),"";const t={analysisAreas:[{feature:{geometry:{rings:e.rings,spatialReference:e.spatial},attributes:{RING:1,SYMBOL:{color:[204,51,0,128],outline:{color:[204,51,0,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"}}},latitude:e.latitude,longitude:e.longitude,description:"feature polygon"}]};let i=JSON.stringify(t).replace('{"analysisAreas"','"analysisAreas"');return i.substr(0,i.length-1)}static getAnalysisAreasFromEnrichBuffers(e){if(!e||e.length<=0)return D.log("getAnalysisAreasFromEnrichBuffers","invalid args",e),"";const t={analysisAreas:[],spatialReference:e[0].spatial};let i,s;for(let a=0;a<e.length;a++){let r=e[a];if(!(r&&r.latitude&&r.longitude&&r.rings))continue;let l="minutes"==r.units.toLowerCase(),o=1==r.value,n=r.units.toLowerCase(),A=l?"minutes":n.toLowerCase().indexOf("miles")>=0?"miles":"kilometers",S=A.substr(0,A.length-1),g=r.value.toString()+" "+S+" "+r.transport,u=l?" Time: ":" Distance: ",m=r.value.toString()+" "+o?S:A,y=("drive"==r.transport?"Drive":"Walk")+u+m;i||(i=r.latitude),s||(s=r.longitude);let h={feature:{geometry:{rings:r.rings},attributes:{RING:1,SYMBOL:{color:[204,51,0,128],outline:{color:[204,51,0,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"}}},latitude:i,longitude:s,description:y,shortName:g,location:{geometry:{x:s,y:i,spatialReference:{wkid:4326}},symbol:{type:"esriPMS",width:14,height:26.6,xoffset:0,yoffset:12.6,contentType:"image/png",imageData:"iVBORw0KGgoAAAANSUhEUgAAABMAAAAjCAYAAAB2KjFhAAACtUlEQVRIS+2WS0wTURSG/zvT0kpfkGJ4pGCViA1Em9CtCQVx5QIWhiVRo8GdSNypqHElkcgOlzVh5ap1X6nEiAkQXzGBxkSKtZC0jdTSB7SdMXdwRjudB+w5q5t7T775z3/OzR0CWbT4x90Glh0CMEx43g1C3FIKz6/zhKwDCJYrldBWZIaupSDiqsE/3mBjmGeMyXLF7GiBubEVhmN2sIY6KblS3kO58BvFX5soZrbA7eYCWY67vR2Z2aZJAoyqMTLMvLXN47a1eeRiUSrmUSrmhHSGNYA11oGtMyO3FcVOYnW9xHH9VKUAcw1MfHSc9HktzvYaEN34B6suymSxCwozsQ+ReHi6n7gG7/iNZvv88W6/Ikgdtl+Y2d6I5NfXqJQK/cQ1MPHQ1uZ5oFSeSFdWtn9Ky93b/olsYvURhUWcXef7TPamGmWXfM3oPeVAi8OIeDKLpWgSrxY3qvIY1gjCl5GOvn2jCLOaWUyN9sDX6aj5wNJaErdm3yNbKAlnurCp0W709ThVPQy+i+H+ixV92OlWC+bGe1VB4sHlx2GsxTPayqhPkyNdurB7gRWEFmPasBsXT+D6YIcu7MnLz5gLf9OG0e7Njp3ThV2bXsBSNKUNo518ftML6p1aUK+oZwfqJgVRIAXLg47E1acLgvkHgtGk1kYTJkfOCEMrxnI0hbuBZSTSeWlPd87kaprqeWwkUopVHxqmdTePYMqTdeRZ9d1svzARtLnODlmbO1XvoqpnhMBkaUAhHUM2/iVE6ONrZZjIoZ+6v6BiZhOZ7yufdjjOL7ybesAaZQog+qpX/R6oKayCqYCoKAmmpVCCaYBqYGpAAbabF8z+3yPxh0XsXJUycVPuYWm3IIyAFkhRmRowl/4hdU2uSFOZHFjv7PDm0xtC+9VAmspkwOAOxw1rgWj+H4uVH6hj08HSAAAAAElFTkSuQmCC"}}};t.analysisAreas.push(h)}let a=JSON.stringify(t).replace('{"analysisAreas"','"analysisAreas"');return a.substr(0,a.length-1)}static getDemoPolygon(){return'"analysisAreas": [       {         "feature": {           "geometry": {             "rings": [               [                 [                   -118.000083501802,                   34.0609396322877                 ],                 [                   -118.000083501802,                   34.0700406810389                 ],                 [                   -118.000083501802,                   34.0791407522251                 ],                 [                   -118.000083501802,                   34.0882398457216                 ],                 [                   -117.989097176058,                   34.0882398457216                 ],                 [                   -117.989097176058,                   34.0973379614042                 ],                 [                   -117.978110850314,                   34.1064350991486                 ],                 [                   -117.96712452457,                   34.1064350991486                 ],                 [                   -117.956138198827,                   34.1064350991486                 ],                 [                   -117.956138198827,                   34.1155312878821                 ],                 [                   -117.956138198827,                   34.1246264693743                 ],                 [                   -117.945151873083,                   34.1246264693743                 ],                 [                   -117.945151873083,                   34.1155312878821                 ],                 [                   -117.945151873083,                   34.1064350991486                 ],                 [                   -117.945151873083,                   34.0973379614042                 ],                 [                   -117.945151873083,                   34.0882398457216                 ],                 [                   -117.945151873083,                   34.0791407522251                 ],                 [                   -117.956138198827,                   34.0791407522251                 ],                 [                   -117.956138198827,                   34.0700406810389                 ],                 [                   -117.96712452457,                   34.0700406810389                 ],                 [                   -117.978110850314,                   34.0700406810389                 ],                 [                   -117.978110850314,                   34.0609396322877                 ],                 [                   -117.989097176058,                   34.0609396322877                 ],                 [                   -118.000083501802,                   34.0609396322877                 ]               ]             ],             "spatialReference": {               "wkid": 4326             }           },           "attributes": {             "OBJECTID": 6,             "NAME": "06 103",             "DESCRIPTION": "Area: 8.1 square miles",             "CREATED": 1518736922977,             "MODIFIED": 1518736922977,             "CREATOR": "fasil_ba",             "EDITOR": "fasil_ba",             "REGION": "US",             "FLAGS": 2,             "SYMBOL": {"color":[255,255,178,230],"outline":{"color":[0,0,0,255],"width":1.5,"type":"esriSLS","style":"esriSLSSolid","marker":null},"type":"esriSFS","style":"esriSFSSolid"},             "STATEFP": "06",             "UNSDLEA": "03690",             "GEOID": "0603690",             "NAME_": "Baldwin Park Unified School District",             "LSAD": "00",             "LOGRADE": "KG",             "HIGRADE": "12",             "MTFCC": "G5420",             "SDTYP": " ",             "FUNCSTAT": "E",             "ALAND": 22081431,             "AWATER": 626574,             "INTPTLAT": "+34.0896602",             "INTPTLON": "-117.9687223",             "GEOID2": 603690,             "COUNT_": 0,             "COUNT_1": 0,             "OID1": 75,             "YEAR_1": 1314,             "COUNTY_1": 19,             "DISTRICT_1": 1964287,             "DISTRICT_2": "Baldwin Park Unified",             "GEOGRAPH_1": "Baldwin Park Unified School District, CA",             "GEOID_12": 603690,             "HISP_1": 16310,             "PCTHISP_1": 86.91,             "AMIND_1": 62,             "PCTAMIND_1": 0.33,             "ASIAN_1": 731,             "PCTASIAN_1": 3.9,             "PAC_1": 32,             "PCTPAC_1": 0.17,             "FIL_1": 326,             "PCTFIL_1": 1.74,             "AFAM_1": 635,             "PCTAFAM_1": 3.38,             "WHITE_1": 552,             "PCTWHITE_1": 2.94,             "TWOORMOR_1": 107,             "PCTTWOOR_1": 0.57,             "NONEREPO_1": 12,             "PCTNONER_1": 0.06,             "TOTAL_1": 18767,             "NONWHITE_1": 18203,             "PCTNONWH_1": 97,             "SHAPE__Area": null,             "SHAPE__Length": null           }         },         "name": "06 103",         "address": "06 103",         "shortName": "06 103",         "description": "Area: 8.1 square miles"       }]'}static generateDriveTime(e,t,i,s){}static generateWalkTime(e,t,i,s){}static _generateRing(e,t,i,s){e&&t&&("miles"==i||"kilometers"==i)&&null!=s||console.log("ERROR: _generateRing invalid args [",e,t,i,s,"]");var a=[];function r(e){return e*Math.PI/180}function l(e){return 180*e/Math.PI}var o="miles"==i?1609.344*s:1e3*s,n=r(e),A=r(t),S=o/6371e3;for(let e=0;e<=360;e+=4){var g=r(e),u=Math.asin(Math.sin(n)*Math.cos(S)+Math.cos(n)*Math.sin(S)*Math.cos(g)),m=(A+Math.atan2(Math.sin(g)*Math.sin(S)*Math.cos(n),Math.cos(S)-Math.sin(n)*Math.sin(u))+Math.PI)%(2*Math.PI)-Math.PI;let t=[];t.push(l(m)),t.push(l(u)),a.push(t)}return a}}