var __awaiter=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{p(r.next(t))}catch(t){s(t)}}function c(t){try{p(r.throw(t))}catch(t){s(t)}}function p(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}p((r=r.apply(t,e||[])).next())}))},__rest=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};import React from"react";import ReactDOM from"react-dom";import{attachEventProps}from"./utils/attachEventProps";export function createOverlayComponent(t,e){const n=`on${t}DidDismiss`;return class extends React.Component{constructor(t){super(t),this.el=document.createElement("div")}static get displayName(){return t}componentDidMount(){this.props.isOpen&&this.present()}componentDidUpdate(t){return __awaiter(this,void 0,void 0,(function*(){t.isOpen!==this.props.isOpen&&!0===this.props.isOpen&&this.present(t),this.controller&&t.isOpen!==this.props.isOpen&&!1===this.props.isOpen&&(yield this.controller.dismiss())}))}present(t){return __awaiter(this,void 0,void 0,(function*(){const r=this.props,{children:i,isOpen:s,onDidDismiss:o=(()=>{})}=r,c=__rest(r,["children","isOpen","onDidDismiss"]),p=Object.assign(Object.assign({},c),{[n]:o});this.controller=yield e.create(Object.assign(Object.assign({},p),{component:this.el,componentProps:{}})),attachEventProps(this.controller,p,t),this.controller.present()}))}render(){return ReactDOM.createPortal(this.props.children,this.el)}}}