System.register(["jimu-core","jimu-arcgis","jimu-ui","jimu-theme","esri/widgets/Daylight","esri/widgets/Daylight/DaylightViewModel","esri/widgets/Weather","esri/widgets/ShadowCast","esri/widgets/ShadowCast/ShadowCastViewModel","esri/widgets/LineOfSight","esri/widgets/LineOfSight/LineOfSightViewModel"],(function(e,t){var a={},o={},i={},n={},l={},s={},r={},c={},d={},u={},g={};return{setters:[function(e){a.Immutable=e.Immutable,a.React=e.React,a.appActions=e.appActions,a.classNames=e.classNames,a.css=e.css,a.jsx=e.jsx},function(e){o.JimuMapViewComponent=e.JimuMapViewComponent},function(e){i.Button=e.Button,i.Label=e.Label,i.Loading=e.Loading,i.LoadingType=e.LoadingType,i.Popper=e.Popper,i.Tooltip=e.Tooltip,i.WidgetPlaceholder=e.WidgetPlaceholder,i.defaultMessages=e.defaultMessages,i.hooks=e.hooks},function(e){n.useTheme=e.useTheme},function(e){l.default=e.default},function(e){s.default=e.default},function(e){r.default=e.default},function(e){c.default=e.default},function(e){d.default=e.default},function(e){u.default=e.default},function(e){g.default=e.default}],execute:function(){e((()=>{var e={89514:e=>{e.exports='<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M18 6.733 8.462.374 1 6.77v8.709l7.473 4.076L18 15.513v-8.78ZM8 2.087 2 7.23v7.655l6 3.273V2.088Zm1 16.158 8-3.394V7.268L9 1.934v16.31Z" fill="#000"></path></svg>'},33869:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 7.5a.522.522 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.508.508 0 0 1-.73 0L1 7.5l4.743-4.846a.508.508 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527Z" fill="#000"></path></svg>'},55339:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746L8.746 8Z" fill="#000"></path></svg>'},28081:e=>{e.exports='<svg viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="m12.153 6.054-.707-.707 2.2-2.2.708.707-2.201 2.2Zm-9.507 8.092.707.707 2.2-2.2-.706-.707-2.201 2.2Zm8.8-1.493 2.2 2.2.707-.706-2.2-2.2-.707.706ZM5.554 5.347l-2.2-2.2-.707.706 2.2 2.2.707-.706ZM9 1.5H8v3h1v-3Zm-1 15h1v-3H8v3Zm8-7v-1h-3v1h3Zm-15 0h3v-1H1v1ZM5 9a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0Zm1 0a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0Z" fill="#000"></path></g><defs><clipPath id="a"><path fill="#fff" transform="translate(0 .5)" d="M0 0h16v16H0z"></path></clipPath></defs></svg>'},67847:e=>{e.exports='<svg viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="M8 6.5h1v1H8v-1Zm0 3h1v-1H8v1Zm0 2h1v-1H8v1Zm0 2h1v-1H8v1Zm8 2v1H0v-1h6v-7H5v-1h1V5.072l5-3.57V15.5h5Zm-6 0V3.444L7 5.587V15.5h3Zm-6-4.605v-.842A3.372 3.372 0 0 1 .84 8.265a3.37 3.37 0 0 1 1.804-1.234c-.205.32-.317.692-.323 1.073a1.467 1.467 0 0 0 1.6 1.46c.027 0 .053-.005.08-.006v-3.45c-.04 0-.08-.008-.12-.008A5.27 5.27 0 0 0 .066 7.9a.374.374 0 0 0-.032.365A3.893 3.893 0 0 0 4 10.895ZM13 7.5h-1v1h1v-1Zm.354-2.288-.707.707 1.58 1.581H14v1h.27l-1.623 1.623.707.707L16 8.184v-.325l-2.646-2.647Z" fill="#000"></path></g><defs><clipPath id="a"><path fill="#fff" transform="translate(0 .5)" d="M0 0h16v16H0z"></path></clipPath></defs></svg>'},68665:e=>{e.exports='<svg viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 8.5a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm1 0a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-6-4H8v1h2v-1Zm2 7v-1H8v1h4Zm-4 1h2v1H8v-1Zm4-6H8v1h4v-1Zm-4 2h5v1H8v-1Z" fill="#000"></path></svg>'},32275:e=>{e.exports='<svg viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><path d="M4.482 3.02 3.856.835l.96-.275.627 2.183a3.797 3.797 0 0 0-.961.275v.002ZM2.347 7.546a3.808 3.808 0 0 1-.09-.493l-2.196.63.275.96 2.196-.63a3.815 3.815 0 0 1-.185-.467Zm.33-2.89c.081-.146.172-.286.272-.42l-1.79-.992-.484.875 1.802.999c.056-.158.123-.312.2-.461v-.001Zm5.166-1.48c.144.086.282.181.413.285l.999-1.803-.875-.483-.992 1.789c.156.06.308.132.455.213v-.001ZM16 10a3.5 3.5 0 0 1-3.5 3.5h-9a2.492 2.492 0 0 1-.648-4.9c.065-.018.127-.042.194-.054.065-.338.199-.658.394-.941a2.765 2.765 0 0 1 4.23-3.337 3.97 3.97 0 0 1 6.26 2.544A3.495 3.495 0 0 1 16 10Zm-1 0a2.503 2.503 0 0 0-1.48-2.276l-.483-.218-.092-.522a2.99 2.99 0 0 0-5.857-.17l-.233.992-.987-.252A1.462 1.462 0 0 0 4.03 8.727l-.124.678-.678.124A1.498 1.498 0 0 0 3.5 12.5h9A2.503 2.503 0 0 0 15 10ZM4.241 6.84a2.416 2.416 0 0 1 1.874-.255c.143-.595.421-1.15.813-1.621-.02-.012-.035-.027-.055-.038a1.799 1.799 0 0 0-2.447.701c-.204.37-.27.8-.185 1.214V6.84Z" fill="#000"></path></g><defs><clipPath id="a"><path fill="#fff" transform="translate(0 .5)" d="M0 0h16v16H0z"></path></clipPath></defs></svg>'},50362:e=>{"use strict";e.exports=l},51393:e=>{"use strict";e.exports=s},27232:e=>{"use strict";e.exports=u},65808:e=>{"use strict";e.exports=g},91932:e=>{"use strict";e.exports=c},67774:e=>{"use strict";e.exports=d},69787:e=>{"use strict";e.exports=r},26826:e=>{"use strict";e.exports=o},48891:e=>{"use strict";e.exports=a},34796:e=>{"use strict";e.exports=n},30726:e=>{"use strict";e.exports=i}},t={};function p(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,p),i.exports}p.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return p.d(t,{a:t}),t},p.d=(e,t)=>{for(var a in t)p.o(t,a)&&!p.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},p.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.p="";var f={};return p.p=window.jimuConfig.baseUrl,(()=>{"use strict";p.r(f),p.d(f,{default:()=>K});var e,t,a,o,i,n,l,s=p(48891),r=p(26826),c=p(30726),d=p(34796);!function(e){e.Daylight="daylight",e.Weather="weather",e.ShadowCast="shadowcast",e.LineOfSight="lineofsight"}(e||(e={})),function(e){e.Date="date",e.Season="season"}(t||(t={})),function(e){e.SyncedWithMap="syncedWithMap",e.Spring="spring",e.Summer="summer",e.Fall="fall",e.Winter="winter"}(a||(a={})),function(e){e.Sunny="sunny",e.Cloudy="cloudy",e.Rainy="rainy",e.Snowy="snowy",e.Foggy="foggy"}(o||(o={})),function(e){e.Threshold="threshold",e.Duration="duration",e.Discrete="discrete"}(i||(i={})),function(e){e.List="list",e.Icon="icon"}(n||(n={})),function(e){e.Horizontal="horizontal",e.Vertical="vertical"}(l||(l={}));const u={_widgetLabel:"3D Toolbox",select3DScene:"Please select a 3D scene to active this widget",clearEffect:"Clear effect",clearAnalysis:"Clear analysis",showDevelopmentLayer:"Show development layer"};function g(e){const t=e.surfaces[1];return s.css`
    /*min-width: 300px;*/
    background-color: ${t.bg};

    .tool-header {

      .label {
        font-weight: 600;
        font-size: 16px;
      }
    }

    .api-loader {
      position: absolute;
      height: 50%;
      left: 50%;
      z-index: 1;
    }

    .tool-content {
      min-width: 270px;
      min-height: 36px;
      overflow: auto;
      height: calc(100% - 32px);

      .esri-widget__heading {
        display: none;
      }

      .tool-footer {
        margin-top: 4px;

        button {
          border: 1px solid ${e.colors.palette.primary[500]};
        }
      }
    }
  `}var m=p(50362),h=p(51393);const v=()=>{const e=s.React.useRef(null),t=s.React.useCallback((t=>{if(!e.current){const a=t.environment.lighting.clone();e.current=a}}),[]),a=s.React.useCallback((t=>{t&&e.current&&(t.environment.lighting=e.current),e.current=null}),[]),o=s.React.useRef(null);return{cacheDefaultLighting:t,restoreDefaultLighting:a,cacheDefaultWeather:s.React.useCallback((e=>{if(!o.current){const t=e.environment.weather.clone();o.current=t}}),[]),restoreDefaultWeather:s.React.useCallback((e=>{e&&o.current&&(e.environment.weather=o.current),o.current=null}),[])}};var w=p(69787),y=p(91932),j=p(67774),C=p(27232),b=p(65808),x=p(33869),M=p.n(x);const S=e=>{const t=window.SVG,{className:a}=e,o=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(a[o[i]]=e[o[i]])}return a}(e,["className"]),i=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:i,src:M()},o)):s.React.createElement("svg",Object.assign({className:i},o))},O=s.React.memo((i=>{var n,l,r;const p=(0,d.useTheme)(),f=c.hooks.useTranslate(u,c.defaultMessages),x=s.React.useRef(null),M=s.React.useRef(null),O=s.React.useRef(null);s.React.useEffect((()=>{var e,t;i.isShowBackBtn&&(null===(e=i.shownModeState)||void 0===e?void 0:e.id)===i.mode&&(null===(t=null==O?void 0:O.current)||void 0===t||t.focus())}),[i.shownModeState,i.isShowBackBtn,i.mode]);const k=s.React.useRef(i.toolConfig.activedOnLoad);s.React.useEffect((()=>{k.current=i.toolConfig.activedOnLoad}),[i.toolConfig]);const[R,W]=s.React.useState(!0),V=s.React.useCallback((()=>{W(!1)}),[]),{updateDaylightWidget:I,destoryDaylightWidget:N}=(e=>{const{cacheDefaultLighting:o,restoreDefaultLighting:i}=v(),{onUpdated:n}=e,l=s.React.useRef(null),r=s.React.useCallback((i=>{var s,r;const c=null===(s=e.jimuMapView)||void 0===s?void 0:s.view;o(c);const d={view:c};return new h.default(d),l.current=new m.default({container:i,view:c,visibleElements:{timezone:e.daylightConfig.timezone,playButtons:e.daylightConfig.playButtons,datePicker:e.daylightConfig.datePicker,sunLightingToggle:e.daylightConfig.dateTimeToggle,shadowsToggle:e.daylightConfig.isShowShadows},timeSliderSteps:e.daylightConfig.timeSliderSteps,playSpeedMultiplier:e.daylightConfig.playSpeedMultiplier,dateOrSeason:null!==(r=e.daylightConfig.dateOrSeason)&&void 0!==r?r:t.Date}),l.current.when((()=>{n(),e.daylightConfig.dateOrSeason===t.Season&&e.daylightConfig.currentSeason!==a.SyncedWithMap&&l.current.viewModel.set("currentSeason",e.daylightConfig.currentSeason);const o=e.daylightConfig.dateTimeAutoPlay;e.daylightConfig.dateOrSeason===t.Season||l.current.viewModel.set("dayPlaying",o)})),l.current}),[e.jimuMapView,e.daylightConfig,o,n]),c=s.React.useCallback((()=>{i(e.jimuMapView.view)}),[e.jimuMapView,i]);return{daylightRef:l.current,updateDaylightWidget:r,destoryDaylightWidget:c}})({jimuMapView:i.jimuMapView,daylightConfig:i.toolConfig.config,onUpdated:V}),{updateWeatherWidget:B,destoryWeatherWidget:L}=(e=>{const{cacheDefaultWeather:t,restoreDefaultWeather:a}=v(),{onUpdated:i}=e,n=s.React.useRef(null),l=s.React.useMemo((()=>({cloudCover:.5,precipitation:.5,fogStrength:.5})),[]),r=s.React.useRef(null),c=s.React.useCallback(((t,a)=>{var i,n,s,r,c,d,u;switch(t){case o.Sunny:{const o=e.weatherConfig.sunnyConfig;a.environment.weather={type:t,cloudCover:null!==(i=null==o?void 0:o.cloudCover)&&void 0!==i?i:l.cloudCover};break}case o.Cloudy:{const o=e.weatherConfig.cloudyConfig;a.environment.weather={type:t,cloudCover:null!==(n=null==o?void 0:o.cloudCover)&&void 0!==n?n:l.cloudCover};break}case o.Rainy:{const o=e.weatherConfig.rainyConfig;a.environment.weather={type:t,cloudCover:null!==(s=null==o?void 0:o.cloudCover)&&void 0!==s?s:l.cloudCover,precipitation:null!==(r=null==o?void 0:o.precipitation)&&void 0!==r?r:l.precipitation};break}case o.Snowy:{const o=e.weatherConfig.snowyConfig;a.environment.weather={type:t,cloudCover:null!==(c=null==o?void 0:o.cloudCover)&&void 0!==c?c:l.cloudCover,precipitation:null!==(d=null==o?void 0:o.precipitation)&&void 0!==d?d:l.precipitation};break}case o.Foggy:{const o=e.weatherConfig.foggyConfig;a.environment.weather={type:t,fogStrength:null!==(u=null==o?void 0:o.fogStrength)&&void 0!==u?u:l.fogStrength};break}}}),[e.weatherConfig,l]),d=s.React.useCallback((a=>{var o;const l=null===(o=e.jimuMapView)||void 0===o?void 0:o.view;return t(l),c(e.weatherConfig.weatherType,l),n.current=new w.default({container:a,view:l}),n.current.when((()=>{i(),r.current=l.watch("environment.weather.type",(()=>{c(l.environment.weather.type,l)}))})),n.current}),[e.jimuMapView,e.weatherConfig.weatherType,c,t,i]),u=s.React.useCallback((()=>{var t;null===(t=null==r?void 0:r.current)||void 0===t||t.remove(),a(e.jimuMapView.view)}),[e.jimuMapView,a]);return{weatherRef:n.current,updateWeatherWidget:d,destoryWeatherWidget:u}})({jimuMapView:i.jimuMapView,weatherConfig:i.toolConfig.config,onUpdated:V}),{updateShadowCastWidget:P,destoryShadowCastWidget:T}=(e=>{const{onUpdated:t}=e,a=s.React.useRef(null),o=s.React.useCallback((o=>{var i,n;return a.current=new y.default({container:o,view:null===(i=e.jimuMapView)||void 0===i?void 0:i.view,visibleElements:{timezone:e.shadowCastConfig.timezone,datePicker:e.shadowCastConfig.datePicker},viewModel:new j.default({view:null===(n=e.jimuMapView)||void 0===n?void 0:n.view,visualizationType:e.shadowCastConfig.visType})}),a.current.when((()=>{t()})),a.current}),[e.jimuMapView,e.shadowCastConfig,t]),i=s.React.useCallback((()=>{}),[]);return{shadowCastRef:a.current,updateShadowCastWidget:o,destoryShadowCastWidget:i}})({jimuMapView:i.jimuMapView,shadowCastConfig:i.toolConfig.config,onUpdated:V}),{updateLineOfSightWidget:Z,destoryLineOfSightWidget:E}=(e=>{const{onUpdated:t}=e,a=s.React.useRef(null),[o,i]=s.React.useState(!1),[n,l]=s.React.useState(!1);s.React.useEffect((()=>{o&&n&&t()}),[o,n,t]);const r=s.React.useCallback((t=>{var o,n;return a.current=new C.default({container:t,view:null===(o=e.jimuMapView)||void 0===o?void 0:o.view,viewModel:new b.default({view:null===(n=e.jimuMapView)||void 0===n?void 0:n.view})}),a.current.viewModel.watch("state",(e=>{"ready"===e&&l(!0)})),a.current.when((()=>{i(!0)})),a.current}),[e.jimuMapView]),c=s.React.useCallback((()=>{}),[]);return{lineOfSightRef:a.current,updateLineOfSightWidget:r,destoryLineOfSightWidget:c}})({jimuMapView:i.jimuMapView,lineOfSightConfig:i.toolConfig.config,onUpdated:V});function D(e){const t=document.createElement("div");return t.className=e+"-container w-100",x.current.innerHTML="",x.current.appendChild(t),t}const H=s.React.useCallback((()=>{var t,a,o;if(null===(a=null===(t=M.current)||void 0===t?void 0:t.view)||void 0===a?void 0:a.map)switch(i.mode){case e.Daylight:N();break;case e.Weather:L();break;case e.ShadowCast:T();break;case e.LineOfSight:E()}null===(o=null==M?void 0:M.current)||void 0===o||o.destroy(),M.current=null,(null==x?void 0:x.current)&&(x.current.innerHTML="")}),[i.mode,N,L,T,E]),z=s.React.useCallback((()=>{if(H(),i.toolConfig.enable)switch(i.mode){case e.Daylight:M.current=I(D(i.mode));break;case e.Weather:M.current=B(D(i.mode));break;case e.ShadowCast:M.current=P(D(i.mode));break;case e.LineOfSight:M.current=Z(D(i.mode))}}),[i.mode,i.toolConfig,H,I,B,P,Z]);s.React.useEffect((()=>(i.useMapWidgetId||H(),()=>{H()})),[null===(n=i.jimuMapView)||void 0===n?void 0:n.view,i.useMapWidgetId,i.toolConfig,H,z]);const{onBackBtnClick:A}=i;s.React.useEffect((()=>{var e,t;(null===(e=i.shownModeState)||void 0===e?void 0:e.id)===i.mode&&(k.current=!0),(null==k?void 0:k.current)?!M.current&&i.useMapWidgetId&&(null===(t=i.jimuMapView)||void 0===t?void 0:t.view)&&z():M.current&&H()}),[i.mode,i.useMapWidgetId,null===(l=i.jimuMapView)||void 0===l?void 0:l.view,i.shownModeState,i.toolConfig,H,z]);const F=(null===(r=i.shownModeState)||void 0===r?void 0:r.id)===i.mode,U=i.mode===e.Daylight||i.mode===e.Weather?f("clearEffect"):f("clearAnalysis");return(0,s.jsx)("div",{className:"p-2 w-100 "+(F?"d-block":"d-none"),css:g(p)},i.isShowBackBtn&&"function"==typeof A&&(0,s.jsx)("div",{className:"tool-header d-flex align-items-center my-1"},(0,s.jsx)(c.Button,{ref:e=>{O.current=e},className:"",type:"tertiary",icon:!0,size:"sm",onClick:A},(0,s.jsx)(S,{size:16,autoFlip:!0})),(0,s.jsx)(c.Label,{className:"label ml-1 my-0"},f(i.mode))),(0,s.jsx)("div",{className:"tool-content"},R&&(0,s.jsx)("div",{className:"api-loader m-2"},(0,s.jsx)(c.Loading,{type:c.LoadingType.Secondary})),(0,s.jsx)("div",{ref:x}),(0,s.jsx)("div",{className:"tool-footer w-100 px-3 mb-2"},(0,s.jsx)(c.Button,{type:"secondary",className:"w-100",onClick:()=>{k.current=!1,A()}},U))))}));var k=p(28081),R=p.n(k);const W=e=>{const t=window.SVG,{className:a}=e,o=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(a[o[i]]=e[o[i]])}return a}(e,["className"]),i=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:i,src:R()},o)):s.React.createElement("svg",Object.assign({className:i},o))};var V=p(32275),I=p.n(V);const N=e=>{const t=window.SVG,{className:a}=e,o=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(a[o[i]]=e[o[i]])}return a}(e,["className"]),i=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:i,src:I()},o)):s.React.createElement("svg",Object.assign({className:i},o))};var B=p(68665),L=p.n(B);const P=e=>{const t=window.SVG,{className:a}=e,o=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(a[o[i]]=e[o[i]])}return a}(e,["className"]),i=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:i,src:L()},o)):s.React.createElement("svg",Object.assign({className:i},o))};var T=p(67847),Z=p.n(T);const E=e=>{const t=window.SVG,{className:a}=e,o=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(a[o[i]]=e[o[i]])}return a}(e,["className"]),i=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:i,src:Z()},o)):s.React.createElement("svg",Object.assign({className:i},o))},D=s.React.memo((t=>{const a=c.hooks.useTranslate(u,c.defaultMessages),[o,i]=s.React.useState(null),n=s.React.useRef(null),l=s.React.useCallback(((e,t)=>{i(e);const a=t.target,o=a.dataset.id?a:a.parentElement;n.current=o}),[]),r=s.React.useCallback((()=>{i(null)}),[]);s.React.useEffect((()=>{var e;null===o&&(null===(e=null==n?void 0:n.current)||void 0===e||e.focus())}),[o]);const d=s.React.useCallback((t=>{if(!t.enable)return null;const o=a(""+t.id);let i=null;switch(t.id){case e.Daylight:i=(0,s.jsx)(W,null);break;case e.Weather:i=(0,s.jsx)(N,null);break;case e.ShadowCast:i=(0,s.jsx)(P,null);break;case e.LineOfSight:i=(0,s.jsx)(E,null)}return(0,s.jsx)(c.Button,{className:"list-item d-flex align-items-center pl-2 py-1 my-3 w-100 jimu-outline-inside",type:"tertiary",title:o,role:"listitem",key:t.id,"data-id":t.id,onClick:e=>l(t,e)},(0,s.jsx)("div",{className:"d-flex list-item-icon mx-2"},i),(0,s.jsx)("div",{className:"d-flex list-item-name"},o))}),[a,l]);return(0,s.jsx)(s.React.Fragment,null,(0,s.jsx)("div",{className:"list-item-container d-flex h-100",role:"list"},(0,s.jsx)("div",{className:(0,s.classNames)("main-list w-100 ",{hide:null!==o})},t.toolsConfig.map((e=>d(e)))),(0,s.jsx)(O,{mode:e.Daylight,toolConfig:t.findToolConfigById(e.Daylight),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:o,isShowBackBtn:!0,onBackBtnClick:r}),(0,s.jsx)(O,{mode:e.Weather,toolConfig:t.findToolConfigById(e.Weather),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:o,isShowBackBtn:!0,onBackBtnClick:r}),(0,s.jsx)(O,{mode:e.ShadowCast,toolConfig:t.findToolConfigById(e.ShadowCast),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:o,isShowBackBtn:!0,onBackBtnClick:r}),(0,s.jsx)(O,{mode:e.LineOfSight,toolConfig:t.findToolConfigById(e.LineOfSight),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:o,isShowBackBtn:!0,onBackBtnClick:r})))}));function H(e){const t=e.surfaces[1];return s.css`
    /* List mode */
    .list-item-container {
      background-color: ${t.bg};
      border: 1px solid ${t.border.color};
      overflow: auto;

      .main-list {

      }

      .hide {
        display: none !important;
      }

      .list-item {
        height: 38px;
        min-width: 240px;

        &:hover {
          background-color: ${e.colors.palette.light[100]};
        }

        .list-item-icon {

        }
        .list-item-name {

        }
      }
    }

    /* Icon mode */
    .icon-item-container {
      background-color: ${t.bg};
      border: 1px solid ${t.border.color};

      .icon-item {
        width: 32px;
        height: 32px;
      }
    }
  `}function z(e){const t=e.surfaces[1];return s.css`
    .popper-header {
      background-color: ${t.bg};

      .popper-title {
        margin-bottom: 0;
        font-weight: 600;
        font-size: 16px;
      }
    }
    .popper-content {
      width: 290px;
    }
  `}var A=p(55339),F=p.n(A);const U=e=>{const t=window.SVG,{className:a}=e,o=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(a[o[i]]=e[o[i]])}return a}(e,["className"]),i=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?s.React.createElement(t,Object.assign({className:i,src:F()},o)):s.React.createElement("svg",Object.assign({className:i},o))},$=s.React.memo((t=>{const a=(0,d.useTheme)(),o=c.hooks.useTranslate(u,c.defaultMessages),i=s.React.useRef(null),[n,r]=s.React.useState(null),[g,p]=s.React.useState(!1),f=s.React.useRef(null),m=s.React.useCallback((()=>{var e;r(null),null===(e=null==f?void 0:f.current)||void 0===e||e.focus(),p(!1)}),[]);s.React.useEffect((()=>(f.current=null,()=>{m()})),[t.toolsConfig,m]);const h=s.React.useCallback(((e,t)=>{let a=!1;("pageOrSizeMode"===t||e&&e.key&&"Escape"===(null==e?void 0:e.key))&&(a=!0),a&&m()}),[m]),v=t.findToolConfigById,w=s.React.useCallback((t=>{if(!t.enable)return null;const a=o(""+t.id);let l=null;switch(t.id){case e.Daylight:l=(0,s.jsx)(W,null);break;case e.Weather:l=(0,s.jsx)(N,null);break;case e.ShadowCast:l=(0,s.jsx)(P,null);break;case e.LineOfSight:l=(0,s.jsx)(E,null)}return(0,s.jsx)("div",{className:"icon-item d-flex",key:t.id},(0,s.jsx)(c.Button,{type:"tertiary",className:"w-100",size:"sm",icon:!0,active:(null==n?void 0:n.id)===t.id,title:a,"data-id":t.id,onClick:e=>{const t=e.target,a=t.dataset.id?t:t.parentElement;i.current=a;const o=i.current.dataset.id;r(v(o)),f.current=a,p(!!o)}},l))}),[n,o,v]),y=s.React.useCallback((e=>{var t;null==e||e.stopPropagation(),null===(t=null==e?void 0:e.nativeEvent)||void 0===t||t.stopPropagation()}),[]),j=t.direction===l.Horizontal?"flex-row":"flex-column";return(0,s.jsx)(s.React.Fragment,null,(0,s.jsx)("div",{className:"icon-item-container d-flex p-1 "+j,onClick:y},t.toolsConfig.map((e=>w(e)))),(0,s.jsx)(c.Popper,{reference:i.current,placement:t.direction===l.Vertical?"right":"bottom",offset:[0,12],showArrow:!0,open:g,keepMount:!0,toggle:h,forceLatestFocusElements:!0},(0,s.jsx)("div",{className:"content-container",css:z(a)},(0,s.jsx)("div",{className:"popper-header d-flex px-3 pt-2 align-items-center justify-content-between"},(0,s.jsx)(c.Label,{className:"popper-title mt-0 py-1"},o((null==n?void 0:n.id)?n.id:"_widgetLabel")),(0,s.jsx)(c.Button,{className:"print-button p-0",type:"tertiary",size:"sm",icon:!0,onClick:m},(0,s.jsx)(U,null))),(0,s.jsx)("div",{className:"popper-content"},(0,s.jsx)(O,{mode:e.Daylight,toolConfig:t.findToolConfigById(e.Daylight),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:n,onBackBtnClick:m}),(0,s.jsx)(O,{mode:e.Weather,toolConfig:t.findToolConfigById(e.Weather),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:n,onBackBtnClick:m}),(0,s.jsx)(O,{mode:e.ShadowCast,toolConfig:t.findToolConfigById(e.ShadowCast),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:n,onBackBtnClick:m}),(0,s.jsx)(O,{mode:e.LineOfSight,toolConfig:t.findToolConfigById(e.LineOfSight),useMapWidgetId:t.useMapWidgetId,jimuMapView:t.jimuMapView,shownModeState:n,onBackBtnClick:m})))))})),_=s.React.memo((e=>{const t=(0,d.useTheme)();function a(t){return(0,s.Immutable)(e.config.tools.find((e=>e.id===t)))}return(0,s.jsx)("div",{className:"h-100",css:H(t)},e.config.arrangement.style===n.List&&(0,s.jsx)(D,{toolsConfig:e.config.tools,findToolConfigById:a,useMapWidgetId:e.useMapWidgetId,jimuMapView:e.jimuMapView}),e.config.arrangement.style===n.Icon&&(0,s.jsx)($,{direction:e.config.arrangement.direction,toolsConfig:e.config.tools,findToolConfigById:a,useMapWidgetId:e.useMapWidgetId,jimuMapView:e.jimuMapView}))}));var G=p(89514),J=p.n(G);const q=s.React.memo((e=>{const t=c.hooks.useTranslate(u,c.defaultMessages),a=((0,d.useTheme)(),t("select3DMapHint")),o=e.arrangement.style===n.List,i=e.arrangement.direction===l.Horizontal?"bottom":"right";return(0,s.jsx)(s.React.Fragment,null,(0,s.jsx)(c.Tooltip,{disableHoverListener:o,disableTouchListener:o,disableFocusListener:o,placement:i,showArrow:!0,title:(0,s.jsx)("div",{className:"p-2",style:{background:"var(--light-200)",border:"1px solid var(--light-800)"}},a),arrowStyle:{background:"var(--light-200)",border:{color:"var(--light-800)",width:"1px"}}},(0,s.jsx)("div",{className:(0,s.classNames)("h-100",{"hide-msg":!o}),css:s.css`
    &.hide-msg {
      .message-wrapper {
        display: none;
      }
    }
  `},(0,s.jsx)(c.WidgetPlaceholder,{widgetId:e.widgetId,icon:J(),title:a,message:o?a:null}))))})),K=e=>{var t,a;const o=null===(t=e.useMapWidgetIds)||void 0===t?void 0:t[0];c.hooks.useEffectOnce((()=>{const{layoutId:t,layoutItemId:a,id:o,dispatch:i}=e;i(s.appActions.widgetStatePropChange(o,"layoutInfo",{layoutId:t,layoutItemId:a}))}));const[i,n]=s.React.useState(null),l=s.React.useCallback((e=>{var t;"3d"===(null===(t=null==e?void 0:e.view)||void 0===t?void 0:t.type)?n(e):n(null)}),[]),d=!(o&&"3d"===(null===(a=null==i?void 0:i.view)||void 0===a?void 0:a.type));return(0,s.jsx)("div",{className:"widget-3d-toolbox jimu-widget h-100"},d&&(0,s.jsx)(q,{widgetId:e.id,arrangement:e.config.arrangement}),!d&&i&&(0,s.jsx)(_,{config:e.config,useMapWidgetId:o,jimuMapView:i}),o&&(0,s.jsx)(r.JimuMapViewComponent,{useMapWidgetId:o,onActiveViewChange:l}))}})(),f})())}}}));