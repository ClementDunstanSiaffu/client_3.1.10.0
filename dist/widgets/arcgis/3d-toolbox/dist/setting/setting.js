System.register(["jimu-core","jimu-theme","jimu-ui","jimu-for-builder","jimu-ui/advanced/setting-components","jimu-ui/basic/list-tree"],(function(e,t){var a={},n={},i={},o={},s={},l={};return{setters:[function(e){a.Immutable=e.Immutable,a.LayoutType=e.LayoutType,a.React=e.React,a.ReactRedux=e.ReactRedux,a.classNames=e.classNames,a.css=e.css,a.jsx=e.jsx,a.polished=e.polished},function(e){n.useTheme=e.useTheme},function(e){i.Button=e.Button,i.Icon=e.Icon,i.Label=e.Label,i.NumericInput=e.NumericInput,i.Radio=e.Radio,i.Select=e.Select,i.Switch=e.Switch,i.defaultMessages=e.defaultMessages,i.hooks=e.hooks},function(e){o.getAppConfigAction=e.getAppConfigAction},function(e){s.DirectionSelector=e.DirectionSelector,s.MapWidgetSelector=e.MapWidgetSelector,s.SettingCollapse=e.SettingCollapse,s.SettingRow=e.SettingRow,s.SettingSection=e.SettingSection,s.SidePopper=e.SidePopper},function(e){l.List=e.List,l.TreeItemActionType=e.TreeItemActionType}],execute:function(){e((()=>{var e={748:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 1 0-6.586 4.533l-.077-1.008A5.5 5.5 0 1 1 12 6.5Zm-9 0a3.501 3.501 0 0 0 2.88 3.445L5.8 8.901a2.501 2.501 0 1 1 3.194-2.224l.949.456A3.5 3.5 0 1 0 3 6.5ZM15.5 11l-5 1-3 4-1-9.5 9 4.5Zm-5.57.094-1.702 2.269-.542-5.152 4.76 2.38-2.517.503Z" fill="#000"></path></svg>'},41553:e=>{e.exports='<svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35.151.722.257 1.34.316 1.852.374.16.725.362 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 21.98 21.98 0 0 1-1.49 1.194 5.17 5.17 0 0 1-.007 1.183l1.464 1.119a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 22.445 22.445 0 0 1-1.807-.66c-.325.233-.679.43-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21.019 21.019 0 0 1-.317-1.853 5.34 5.34 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546c.567-.49 1.063-.888 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196c.719.233 1.321.453 1.807.66.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994h2.839Zm-.365 1H6.985l-.28 1.866-.467.19c-.235.095-.46.21-.672.34l-.207.136-.42.293-.476-.197c-.328-.137-.718-.281-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4.127 4.127 0 0 0-.021.816l.014.144.058.492-.419.294c-.288.203-.615.451-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29c.204.146.42.274.645.384l.228.103.474.199.059.49c.04.338.103.731.19 1.177l.043.219h2.088l.282-1.867.466-.19c.236-.095.46-.21.672-.34l.207-.136.419-.293.476.198c.33.136.72.28 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4.131 4.131 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18.1 18.1 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.496 4.496 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49c-.032-.27-.08-.576-.14-.916l-.094-.48Zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z" fill="#000"></path></svg>'},99142:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTIiIGhlaWdodD0iNTYiIHZpZXdCb3g9IjAgMCA5MiA1NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxyZWN0IHdpZHRoPSI5MiIgaGVpZ2h0PSI1NiIgZmlsbD0iIzI4MjgyOCIvPg0KPGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iNSIgZmlsbD0iIzZBNkE2QSIvPg0KPGNpcmNsZSBjeD0iMTQiIGN5PSIyOCIgcj0iNSIgZmlsbD0iIzZBNkE2QSIvPg0KPGNpcmNsZSBjeD0iMTQiIGN5PSI0MiIgcj0iNSIgZmlsbD0iIzZBNkE2QSIvPg0KPHJlY3QgeD0iMjYiIHk9IjEyIiB3aWR0aD0iMjciIGhlaWdodD0iNCIgZmlsbD0iIzZBNkE2QSIvPg0KPHJlY3QgeD0iMjYiIHk9IjI2IiB3aWR0aD0iNDIiIGhlaWdodD0iNCIgZmlsbD0iIzZBNkE2QSIvPg0KPHJlY3QgeD0iMjYiIHk9IjQwIiB3aWR0aD0iNTMiIGhlaWdodD0iNCIgZmlsbD0iIzZBNkE2QSIvPg0KPC9zdmc+DQo="},67113:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjcyIiB2aWV3Qm94PSIwIDAgMTA4IDcyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHJlY3QgeD0iMjMiIHk9IjI2IiB3aWR0aD0iNjIiIGhlaWdodD0iMjAiIGZpbGw9IiMyODI4MjgiLz4NCjxyZWN0IHg9IjMyIiB5PSIzMCIgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiByeD0iNiIgZmlsbD0iIzZBNkE2QSIvPg0KPHJlY3QgeD0iNDgiIHk9IjMwIiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHJ4PSI2IiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSI2NCIgeT0iMzAiIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgcng9IjYiIGZpbGw9IiM2QTZBNkEiLz4NCjwvc3ZnPg0K"},48891:e=>{"use strict";e.exports=a},23137:e=>{"use strict";e.exports=o},34796:e=>{"use strict";e.exports=n},30726:e=>{"use strict";e.exports=i},77756:e=>{"use strict";e.exports=s},59587:e=>{"use strict";e.exports=l}},t={};function c(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,c),i.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="";var r={};return c.p=window.jimuConfig.baseUrl,(()=>{"use strict";c.r(r),c.d(r,{default:()=>T});var e=c(48891),t=c(34796),a=c(30726),n=c(23137),i=c(77756);const o={selectMapWidget:"Select a Map widget",arrangementStyle:"Arrangement style",activedOnLoad:"Active tool when widget load",timezoneSelector:"Timezone selector",timeSliderSteps:"Time slider steps",dateSelector:"Date selector",defaultSeason:"Default season",syncedWithMap:"Synchronized with map",spring:"Spring",summer:"Summer",fall:"Fall",winter:"Winter",autoYearlyPlay:"Auto yearly play",daytimePlaySpeed:"Daytime play speed",shadowOption:"Shadow option",dateTimeOption:"Date time option",defaultWeather:"Default weather",sunny:"Sunny",cloudy:"Cloudy",rainy:"Rainy",snowy:"Snowy",foggy:"Foggy",defaultValues:"Default values",cloudCover:"Cloud cover",precipitation:"Precipitation",sunnyDay:"Sunny day",cloudyDay:"Cloudy day",rainyDay:"Rainy day",snowyDay:"Snowy day",snowCover:"Snow cover",foggyDay:"Foggy day",fogStrength:"Fog density",defaultAnalysisType:"Default analysis type",threshold:"Above threshold",duration:"Total duration",discrete:"Discreate shadow",colorSchema:"Color schema",observePoint:"Observe Point",markIntersections:"Mark Intersections",markPoint:"Mark Point"};function s(t){const a=t.colors.palette.light[200];return e.css`
      font-size: 13px;
      font-weight: lighter;

      .jimu-widget-setting--section {
        padding: 18px 16px;
      }

      /* ToolsContainer */
      .jimu-tree {
        .jimu-tree-item {
          .jimu-tree-item__content {
            .jimu-tree-item__body {
              background-color: transparent;

              .jimu-tree-item__title-text {
                /* for Safari ,#9889 */
                -webkit-line-clamp: 1;
                word-break: keep-all;
              }
            }
          }
        }
      }

      /* Arrangement ui-mode */
      .ui-mode-setting {
        display: flex;
      }

      .ui-mode-card-chooser{
        display: flex;
        align-items: start;

        .ui-mode-card-wapper {
          width: calc((100% - ${10}px - ${8}px) / 2);
        }

        .ui-mode-card-separator {
          width: ${10}px
        }
        .ui-mode-card {
          flex: 1;
          width: 100%;
          background: ${a};
          border: ${2}px solid ${a};
          margin: 0 0 0.5rem 0;

          .jimu-icon {
            margin: 0
          }
        }
        .ui-mode-card.active {
          border: ${2}px solid #00D8ED;
          background-color: ${a} !important;
        }
        .ui-mode-label {
          overflow: hidden;
          text-align: center;
        }
      }

      .placeholder-container{
        height: calc(100% - 180px);

        .placeholder-icon{
          color: var(--dark-200);
        }
        .placeholder-hint{
          font-size: ${e.polished.rem(14)};
          font-weight: 500;
          color: var(--dark-500);
          max-width: ${e.polished.rem(160)};
        }
      }
  `}var l,d,g,u,m,p,S;!function(e){e.Daylight="daylight",e.Weather="weather",e.ShadowCast="shadowcast",e.LineOfSight="lineofsight"}(l||(l={})),function(e){e.Date="date",e.Season="season"}(d||(d={})),function(e){e.SyncedWithMap="syncedWithMap",e.Spring="spring",e.Summer="summer",e.Fall="fall",e.Winter="winter"}(g||(g={})),function(e){e.Sunny="sunny",e.Cloudy="cloudy",e.Rainy="rainy",e.Snowy="snowy",e.Foggy="foggy"}(u||(u={})),function(e){e.Threshold="threshold",e.Duration="duration",e.Discrete="discrete"}(m||(m={})),function(e){e.List="list",e.Icon="icon"}(p||(p={})),function(e){e.Horizontal="horizontal",e.Vertical="vertical"}(S||(S={}));var h=c(59587),x=c(41553),f=c.n(x);const y=e.React.memo((t=>{const n=a.hooks.useTranslate(o,a.defaultMessages),s=t.onSidePopperToggle,c=e.React.useCallback(((e,t)=>{s(e.id,t.event.target)}),[s]),r=e.React.useCallback((e=>(null==e?void 0:e.map((e=>{const t=e.enable,a=[{label:n("edit"),iconProps:()=>({icon:f()}),action:t=>{c(e,t)}}];return{itemKey:e.id,itemStateTitle:n(e.id),itemStateChecked:t,itemStateCommands:e.id!==l.LineOfSight?a:[]}}))).asMutable()),[c,n]),[d,g]=e.React.useState((()=>r(t.tools)));return e.React.useEffect((()=>{g(r(t.tools))}),[t.tools,r]),(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.SettingSection,{title:n("tools")},(0,e.jsx)(i.SettingRow,null,(0,e.jsx)("div",{className:"w-100"},(0,e.jsx)(h.List,{size:"sm",className:"w-100 py-1 pl-0 pr-1",itemsJson:d,showCheckbox:!0,dndEnabled:!0,disableDoubleClickTitle:!0,onUpdateItem:(a,n)=>{const[,i]=a.itemJsons,o=[...i],s=[];a.updateType===h.TreeItemActionType.HandleCheckboxChanged?t.tools.forEach((e=>{o.forEach((t=>{const a=t.itemKey;e.id===a&&(e=e.setIn(["enable"],t.itemStateChecked),s.push(e))}))})):a.updateType===h.TreeItemActionType.HandleDidDrop&&o.forEach((e=>{const a=e.itemKey,n=t.tools.findIndex((e=>e.id===a));n>-1&&s.push(t.tools[n])})),t.onToolsConfigChanged((0,e.Immutable)(s))}})))))}));function j(t){return e.css`
    .side-popper-container{
      padding-top: 0;

      .side-popper {
        .numeric-input {
          width: 56px; /* ,#10453 */
        }

        .first-setting-section {
          padding-top: 0;
        }

        .jimu-widget-setting--section {
          padding-left: 0;
          padding-right: 0;
        }
      }

      /* Shadow cast */
      .shadow-cast-radios {
        color: ${t.colors.palette.dark[800]}
      }
    }
  `}const C=e.React.memo((t=>{const n=a.hooks.useTranslate(o,a.defaultMessages),s=t.onAcitvedChanged,l=e.React.useCallback((e=>{s(e)}),[s]);return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.SettingSection,null,(0,e.jsx)(i.SettingRow,{label:n("activedOnLoad")},(0,e.jsx)(a.Switch,{"aria-label":n("activedOnLoad"),checked:t.toolConfig.activedOnLoad,onChange:e=>{l(e.target.checked)}}))))})),b=e.React.memo((t=>{const n=a.hooks.useTranslate(o,a.defaultMessages),s=e.React.useMemo((()=>({timeSliderStepsDefault:5,timeSliderStepsMax:120,timeSliderStepsMin:1,speedDefault:1,speedMax:10,speedMin:.1})),[]),{onSettingChanged:l,hanldeToolSettingChanged:c}=t,r=t.toolConfig.config,u=e.React.useCallback(((e,a)=>{l(c(t.toolConfig,e,a))}),[t.toolConfig,l,c]),m=e.React.useCallback(((e,t)=>{t&&u({dateOrSeason:e})}),[u]),p=e.React.useCallback((e=>{let t={playButtons:e};!e&&r.dateTimeAutoPlay&&(t=Object.assign(Object.assign({},t),{dateTimeAutoPlay:!1})),u(t)}),[u,r.dateTimeAutoPlay]),S=[g.SyncedWithMap,g.Spring,g.Summer,g.Fall,g.Winter];return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.SettingSection,{className:"first-setting-section"},(0,e.jsx)(i.SettingRow,{label:n("timezoneSelector")},(0,e.jsx)(a.Switch,{"aria-label":n("timezoneSelector"),checked:r.timezone,onChange:e=>{u({timezone:e.target.checked})}})),(0,e.jsx)(i.SettingRow,{label:n("timeSliderSteps")},(0,e.jsx)(a.NumericInput,{className:"ml-2 numeric-input",size:"sm",value:r.timeSliderSteps,defaultValue:s.timeSliderStepsDefault,min:s.timeSliderStepsMin,max:s.timeSliderStepsMax,step:1,precision:0,onChange:e=>{u({timeSliderSteps:e})},required:!0})),(0,e.jsx)(i.SettingRow,{label:n("dateSelector")},(0,e.jsx)(a.Switch,{"aria-label":n("dateSelector"),checked:r.datePicker,onChange:e=>{u({datePicker:e.target.checked})}})),r.datePicker&&(0,e.jsx)(i.SettingRow,null,(0,e.jsx)("div",{className:"d-block"},(0,e.jsx)("div",{className:"d-flex align-items-center mb-2"},(0,e.jsx)(a.Label,{className:"d-flex align-items-center"},(0,e.jsx)(a.Radio,{name:"dateOrSeason",className:"mr-2",checked:r.dateOrSeason===d.Date,onChange:(e,t)=>{m(d.Date,t)}}),n("date"))),(0,e.jsx)("div",{className:"d-flex align-items-center"},(0,e.jsx)(a.Label,{className:"d-flex align-items-center"},(0,e.jsx)(a.Radio,{name:"dateOrSeason",className:"mr-2",checked:r.dateOrSeason===d.Season,onChange:(e,t)=>{m(d.Season,t)}}),n("season"))))),r.dateOrSeason===d.Season&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.SettingRow,{label:n("defaultSeason")}),(0,e.jsx)(i.SettingRow,null,(0,e.jsx)(a.Select,{size:"sm",value:r.currentSeason,onChange:e=>u({currentSeason:e.target.value}),className:""},S.map(((t,a)=>{const i=n(t);return(0,e.jsx)("option",{key:a,value:t},i)}))))),(0,e.jsx)(i.SettingRow,{label:n("enablePlayControl")},(0,e.jsx)(a.Switch,{"aria-label":n("enablePlayControl"),checked:r.playButtons,onChange:e=>{p(e.target.checked)}})),r.playButtons&&r.dateOrSeason===d.Date&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.SettingRow,{label:n("autoPlay")},(0,e.jsx)(a.Switch,{"aria-label":n("autoPlay"),checked:r.dateTimeAutoPlay,onChange:e=>{u({dateTimeAutoPlay:e.target.checked})}})),(0,e.jsx)(i.SettingRow,{label:n("daytimePlaySpeed")},(0,e.jsx)(a.NumericInput,{className:"ml-2 numeric-input",size:"sm",value:r.playSpeedMultiplier,defaultValue:s.speedDefault,min:s.speedMin,max:s.speedMax,step:.5,onChange:e=>{u({playSpeedMultiplier:e})},required:!0}))),(0,e.jsx)(i.SettingRow,{label:n("dateTimeOption")},(0,e.jsx)(a.Switch,{"aria-label":n("dateTimeOption"),checked:r.dateTimeToggle,onChange:e=>{u({dateTimeToggle:e.target.checked})}})),(0,e.jsx)(i.SettingRow,{label:n("shadowOption")},(0,e.jsx)(a.Switch,{"aria-label":n("shadowOption"),checked:r.isShowShadows,onChange:e=>{u({isShowShadows:e.target.checked})}}))),(0,e.jsx)(C,{toolConfig:t.toolConfig,onAcitvedChanged:e=>u(null,e)}))})),I=e.React.memo((t=>{const n=a.hooks.useTranslate(o,a.defaultMessages),{onSettingChanged:s,hanldeToolSettingChanged:l}=t,c=e.React.useCallback(((e,a)=>{s(l(t.toolConfig,e,a))}),[t.toolConfig,s,l]),[r,d]=e.React.useState(!1),g=()=>{d(!r)},[m,p]=e.React.useState(!1),S=()=>{p(!m)},[h,x]=e.React.useState(!1),f=()=>{x(!h)},[y,j]=e.React.useState(!1),b=()=>{j(!y)},[I,w]=e.React.useState(!1),v=()=>{w(!I)},R=[u.Sunny,u.Cloudy,u.Rainy,u.Snowy,u.Foggy],N=t.toolConfig.config;return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.SettingSection,{className:"first-setting-section"},(0,e.jsx)(i.SettingRow,{label:n("defaultWeather")}),(0,e.jsx)(i.SettingRow,null,(0,e.jsx)(a.Select,{size:"sm",value:N.weatherType,onChange:e=>c({weatherType:e.target.value}),className:""},R.map(((t,a)=>(0,e.jsx)("option",{key:a,value:t},n(t))))))),(0,e.jsx)(i.SettingSection,null,(0,e.jsx)(i.SettingRow,{label:n("defaultValues")}),(0,e.jsx)(i.SettingCollapse,{label:n("sunnyDay"),isOpen:r,onRequestOpen:g,onRequestClose:g,className:"my-3"},(0,e.jsx)(i.SettingRow,{label:n("cloudCover"),className:"mx-1 my-2"},(0,e.jsx)(a.NumericInput,{className:"ml-2 numeric-input",size:"sm",value:N.sunnyConfig.cloudCover,defaultValue:.5,min:0,max:1,step:.1,onChange:e=>{c({sunnyConfig:{cloudCover:e}})},required:!0}))),(0,e.jsx)(i.SettingCollapse,{label:n("cloudyDay"),isOpen:m,onRequestOpen:S,onRequestClose:S,className:"my-3"},(0,e.jsx)(i.SettingRow,{label:n("cloudCover"),className:"mx-1 my-2"},(0,e.jsx)(a.NumericInput,{className:"ml-2 numeric-input",size:"sm",value:N.cloudyConfig.cloudCover,defaultValue:.5,min:0,max:1,step:.1,onChange:e=>{c({cloudyConfig:{cloudCover:e}})},required:!0}))),(0,e.jsx)(i.SettingCollapse,{label:n("rainyDay"),isOpen:h,onRequestOpen:f,onRequestClose:f,className:"my-3"},(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.SettingRow,{label:n("cloudCover"),className:"mx-1 my-2"},(0,e.jsx)(a.NumericInput,{className:"ml-2 numeric-input",size:"sm",value:N.rainyConfig.cloudCover,defaultValue:.5,min:0,max:1,step:.1,onChange:e=>{c({rainyConfig:Object.assign(Object.assign({},N.rainyConfig),{cloudCover:e})})},required:!0})),(0,e.jsx)(i.SettingRow,{label:n("precipitation"),className:"mx-1 my-2"},(0,e.jsx)(a.NumericInput,{className:"ml-2 numeric-input",size:"sm",value:N.rainyConfig.precipitation,defaultValue:.5,min:0,max:1,step:.1,onChange:e=>{c({rainyConfig:Object.assign(Object.assign({},N.rainyConfig),{precipitation:e})})},required:!0})))),(0,e.jsx)(i.SettingCollapse,{label:n("snowyDay"),isOpen:y,onRequestOpen:b,onRequestClose:b,className:"my-3"},(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.SettingRow,{label:n("cloudCover"),className:"mx-1 my-2"},(0,e.jsx)(a.NumericInput,{className:"ml-2 numeric-input",size:"sm",value:N.snowyConfig.cloudCover,defaultValue:.5,min:0,max:1,step:.1,onChange:e=>{c({snowyConfig:Object.assign(Object.assign({},N.snowyConfig),{cloudCover:e})})},required:!0})),(0,e.jsx)(i.SettingRow,{label:n("precipitation"),className:"mx-1 my-2"},(0,e.jsx)(a.NumericInput,{className:"ml-2 numeric-input",size:"sm",value:N.snowyConfig.precipitation,defaultValue:.5,min:0,max:1,step:.1,onChange:e=>{c({snowyConfig:Object.assign(Object.assign({},N.snowyConfig),{precipitation:e})})},required:!0})))),(0,e.jsx)(i.SettingCollapse,{label:n("foggyDay"),isOpen:I,onRequestOpen:v,onRequestClose:v,className:"my-3"},(0,e.jsx)(i.SettingRow,{label:n("fogStrength"),className:"mx-1 my-2"},(0,e.jsx)(a.NumericInput,{className:"ml-2 numeric-input",size:"sm",value:N.foggyConfig.fogStrength,defaultValue:.5,min:0,max:1,step:.1,onChange:e=>{c({foggyConfig:{fogStrength:e}})},required:!0})))),(0,e.jsx)(C,{toolConfig:t.toolConfig,onAcitvedChanged:e=>c(null,e)}))})),w=e.React.memo((t=>{const n=a.hooks.useTranslate(o,a.defaultMessages),{onSettingChanged:s,hanldeToolSettingChanged:l}=t,c=e.React.useCallback(((e,a)=>{s(l(t.toolConfig,e,a))}),[t.toolConfig,s,l]),r=e.React.useCallback(((e,a)=>{a&&c(Object.assign(Object.assign({},t.toolConfig.config),{visType:e}))}),[c,t.toolConfig]),d=t.toolConfig.config;return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.SettingSection,{className:"first-setting-section"},(0,e.jsx)(i.SettingRow,{label:n("defaultAnalysisType")}),(0,e.jsx)(i.SettingRow,null,(0,e.jsx)("div",{className:"d-block shadow-cast-radios"},(0,e.jsx)("div",{className:"d-flex align-items-center mb-2"},(0,e.jsx)(a.Label,{className:"d-flex align-items-center"},(0,e.jsx)(a.Radio,{name:"defaultAnalysisType",className:"mr-2",checked:d.visType===m.Threshold,onChange:(e,t)=>r(m.Threshold,t)}),n(m.Threshold))),(0,e.jsx)("div",{className:"d-flex align-items-center mb-2"},(0,e.jsx)(a.Label,{className:"d-flex align-items-center"},(0,e.jsx)(a.Radio,{name:"defaultAnalysisType",className:"mr-2",checked:d.visType===m.Duration,onChange:(e,t)=>r(m.Duration,t)}),n(m.Duration))),(0,e.jsx)("div",{className:"d-flex align-items-center"},(0,e.jsx)(a.Label,{check:!0,className:"d-flex align-items-center"},(0,e.jsx)(a.Radio,{name:"defaultAnalysisType",className:"mr-2",checked:d.visType===m.Discrete,onChange:(e,t)=>r(m.Discrete,t)}),n(m.Discrete))))),(0,e.jsx)(i.SettingRow,{label:n("timezoneSelector")},(0,e.jsx)(a.Switch,{"aria-label":n("timezoneSelector"),checked:d.timezone,onChange:e=>{c({timezone:e.target.checked})}})),(0,e.jsx)(i.SettingRow,{label:n("dateSelector")},(0,e.jsx)(a.Switch,{"aria-label":n("dateSelector"),checked:d.datePicker,onChange:e=>{c({datePicker:e.target.checked})}}))),(0,e.jsx)(C,{toolConfig:t.toolConfig,onAcitvedChanged:e=>c(null,e)}))})),v=e.React.memo((t=>{const{onSettingChanged:a,hanldeToolSettingChanged:n}=t,o=e.React.useCallback(((e,i)=>{a(n(t.toolConfig,e,i))}),[t.toolConfig,a,n]);return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.SettingSection,{className:"first-setting-section"},(0,e.jsx)(i.SettingRow,null)),(0,e.jsx)(C,{toolConfig:t.toolConfig,onAcitvedChanged:e=>o(null,e)}))})),R=e.React.memo((n=>{const s=(0,t.useTheme)(),c=a.hooks.useTranslate(o,a.defaultMessages),r=e.React.useCallback((e=>{const t=n.toolsConfig.find((t=>t.id===e));return t&&t.config?t:null}),[n.toolsConfig]),d=e.React.useCallback(((e,t,a)=>{const n=Object.assign({},e);return t&&(n.config=Object.assign(Object.assign({},n.config),t)),void 0!==a&&(n.activedOnLoad=a),n}),[]),g=n.onSettingChanged,u=e.React.useCallback(((t,a)=>{const i=n.toolsConfig.findIndex((e=>e.id===t));if(i>-1){const t=e.Immutable.setIn(n.toolsConfig,[i.toString()],a);g(t)}}),[g,n.toolsConfig]),m=c(n.shownMode?n.shownMode:"tools");return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.SidePopper,{title:m,css:j(s),isOpen:null!==n.shownMode,toggle:()=>n.onSidePopperClose(),trigger:null,position:"right"},(0,e.jsx)(i.SettingSection,{className:"side-popper-container"},(0,e.jsx)("div",{className:"side-popper"},n.shownMode===l.Daylight&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(b,{toolConfig:r(l.Daylight),hanldeToolSettingChanged:d,onSettingChanged:e=>{u(l.Daylight,e)}})),n.shownMode===l.Weather&&(0,e.jsx)(I,{toolConfig:r(l.Weather),hanldeToolSettingChanged:d,onSettingChanged:e=>{u(l.Weather,e)}}),n.shownMode===l.ShadowCast&&(0,e.jsx)(w,{toolConfig:r(l.ShadowCast),hanldeToolSettingChanged:d,onSettingChanged:e=>{u(l.ShadowCast,e)}}),n.shownMode===l.LineOfSight&&(0,e.jsx)(v,{toolConfig:r(l.LineOfSight),hanldeToolSettingChanged:d,onSettingChanged:e=>{u(l.LineOfSight,e)}})))))})),N=e.React.memo((t=>{const n=a.hooks.useTranslate(o,a.defaultMessages),s=t.onChange,l=e.React.useCallback((e=>{s(Object.assign(Object.assign({},t.arrangement),{style:e}))}),[s,t.arrangement]),r=e.React.useCallback((e=>{s(Object.assign(Object.assign({},t.arrangement),{direction:e?S.Vertical:S.Horizontal}))}),[s,t.arrangement]),d=n("arrangementStyle"),g=t.widgetId+"-uimode-description",u=t.widgetId+"-uimode-0",m=t.widgetId+"-uimode-1";return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(i.SettingSection,{title:d},(0,e.jsx)(i.SettingRow,null,(0,e.jsx)("div",{className:"ui-mode-card-chooser"},(0,e.jsx)(a.Label,{className:"d-flex flex-column ui-mode-card-wapper"},(0,e.jsx)(a.Button,{icon:!0,className:(0,e.classNames)("ui-mode-card",{active:t.arrangement.style===p.List}),onClick:()=>l(p.List),"aria-labelledby":u,"aria-describedby":g},(0,e.jsx)(a.Icon,{width:92,height:56,icon:c(99142),autoFlip:!0})),(0,e.jsx)("div",{id:u,className:"mx-1 text-break ui-mode-label"},n("listMode"))),(0,e.jsx)("div",{className:"ui-mode-card-separator"}),(0,e.jsx)(a.Label,{className:"d-flex flex-column ui-mode-card-wapper"},(0,e.jsx)(a.Button,{icon:!0,className:(0,e.classNames)("ui-mode-card",{active:t.arrangement.style===p.Icon}),onClick:()=>l(p.Icon),"aria-labelledby":m,"aria-describedby":g},(0,e.jsx)(a.Icon,{width:92,height:56,icon:c(67113),autoFlip:!0})),(0,e.jsx)("div",{id:m,className:"mx-1 text-break ui-mode-label"},n("iconMode")))))),t.arrangement.style===p.Icon&&(0,e.jsx)(i.SettingSection,null,(0,e.jsx)(i.SettingRow,{label:n("direction")},(0,e.jsx)(i.DirectionSelector,{vertical:t.arrangement.direction===S.Vertical,onChange:r}))))}));var k=c(748),M=c.n(k);const D=t=>{const a=window.SVG,{className:n}=t,i=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a}(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:o,src:M()},i)):e.React.createElement("svg",Object.assign({className:o},i))},T=l=>{const c=(0,t.useTheme)(),r=a.hooks.useTranslate(o,a.defaultMessages),d=e.ReactRedux.useSelector((e=>{var t,a;let n;return n=window.jimuConfig.isBuilder?e.appStateInBuilder.appConfig:e.appConfig,{appConfig:n,layoutInfo:null===(a=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.widgetsState[l.id])||void 0===a?void 0:a.layoutInfo}})),g=e.React.useMemo((()=>{var e;return(null===(e=l.useMapWidgetIds)||void 0===e?void 0:e.length)>0}),[l.useMapWidgetIds]),u={w:350,h:290},m={w:138,h:42},h={w:42,h:138},[x,f]=e.React.useState(null),j=(e,t)=>{t&&(C.current=t),f(e)},C=e.React.useRef(null);return e.React.useEffect((()=>{null===x&&(null==C?void 0:C.current)&&(C.current.focus(),C.current=null)}),[x]),(0,e.jsx)("div",{className:"widget-setting-directions jimu-widget-setting",css:s(c)},(0,e.jsx)(i.SettingSection,{title:r("selectMapWidget"),className:(0,e.classNames)({"border-0":!g})},(0,e.jsx)(i.SettingRow,null,(0,e.jsx)(i.MapWidgetSelector,{onSelect:e=>{l.onSettingChange({id:l.id,useMapWidgetIds:e})},useMapWidgetIds:l.useMapWidgetIds}))),!g&&(0,e.jsx)("div",{className:"d-flex justify-content-center align-items-center placeholder-container"},(0,e.jsx)("div",{className:"text-center"},(0,e.jsx)(D,{size:48,className:"d-inline-block placeholder-icon mb-2"}),(0,e.jsx)("p",{className:"placeholder-hint"},r("selectMapHint")))),g&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(y,{tools:l.config.tools,onToolsConfigChanged:e=>{l.onSettingChange({id:l.id,config:l.config.setIn(["tools"],e)})},onSidePopperToggle:j}),(0,e.jsx)(N,{widgetId:l.id,arrangement:l.config.arrangement,onChange:t=>{var a,i,o,s;let c=u;const{style:r,direction:g}=t;r===p.List?c=u:r===p.Icon&&g===S.Horizontal?c=m:r===p.Icon&&g===S.Vertical&&(c=h);const x=null===(a=d.layoutInfo)||void 0===a?void 0:a.layoutId,f=null===(s=null===(o=null===(i=d.appConfig)||void 0===i?void 0:i.layouts)||void 0===o?void 0:o[x])||void 0===s?void 0:s.type;x&&f===e.LayoutType.FixedLayout&&(0,n.getAppConfigAction)().editLayoutItemSize(d.layoutInfo,c.w,c.h).exec(),l.onSettingChange({id:l.id,config:l.config.setIn(["arrangement"],t)})}}),(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(R,{toolsConfig:l.config.tools,shownMode:x,onSidePopperClose:()=>j(null),onSettingChanged:e=>{l.onSettingChange({id:l.id,config:l.config.setIn(["tools"],e)})}}))))}})(),r})())}}}));