System.register(["jimu-core","jimu-arcgis","esri/widgets/FloorFilter"],(function(e,t){var i={},o={},r={};return{setters:[function(e){i.React=e.React,i.jsx=e.jsx},function(e){o.JimuMapViewComponent=e.JimuMapViewComponent},function(e){r.default=e.default}],execute:function(){e((()=>{var e={31504:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var o=i(8081),r=i.n(o),n=i(23645),s=i.n(n)()(r());s.push([e.id,".widget-floorfilter{width:100%;height:100%}.widget-floorfilter-nomap{color:var(--dark-600);background-color:var(--light-200)}.widget-floorfilter-header{margin:10px 10px 5px;font-weight:bold}.widget-floorfilter-msg{padding:12px;height:48px}.widget-floorfilter-container{overflow-y:auto;height:100%}.widget-floorfilter .esri-floor-filter__zoom-button.esri-button--disabled{opacity:1}ul.esri-floor-filter__filter-menu-items>li>button.esri-floor-filter__filter-menu-site,ul.esri-floor-filter__filter-menu-items>li>button.esri-floor-filter__filter-menu-facility,.esri-floor-filter__filter-menu-header .esri-icon-close,.esri-floor-filter .esri-floor-filter__filter-menu .esri-floor-filter__filter-menu-header-back{color:var(--dark-600) !important}.esri-floor-filter .esri-floor-filter__button-container .esri-widget--button-active{color:var(--primary)}.esri-view-height-less-than-small .esri-floor-filter .esri-floor-filter__close-levels-button,.esri-view-width-less-than-medium .esri-floor-filter .esri-floor-filter__close-levels-button{background-color:var(--light-100) !important}\n",""]);const a=s},23645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",o=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),o&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),o&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,o,r,n){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&s[d[0]]||(void 0!==n&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=n),i&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=i):d[2]=i),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},93379:e=>{"use strict";var t=[];function i(e){for(var i=-1,o=0;o<t.length;o++)if(t[o].identifier===e){i=o;break}return i}function o(e,o){for(var n={},s=[],a=0;a<e.length;a++){var l=e[a],c=o.base?l[0]+o.base:l[0],d=n[c]||0,u="".concat(c," ").concat(d);n[c]=d+1;var f=i(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=r(p,o);o.byIndex=a,t.splice(a,0,{identifier:u,updater:h,references:1})}s.push(u)}return s}function r(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,r){var n=o(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<n.length;s++){var a=i(n[s]);t[a].references--}for(var l=o(e,r),c=0;c<n.length;c++){var d=i(n[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}n=l}}},90569:e=>{"use strict";var t={};e.exports=function(e,i){var o=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(i)}},19216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var o="";i.supports&&(o+="@supports (".concat(i.supports,") {")),i.media&&(o+="@media ".concat(i.media," {"));var r=void 0!==i.layer;r&&(o+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),o+=i.css,r&&(o+="}"),i.media&&(o+="}"),i.supports&&(o+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},44589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},62830:e=>{"use strict";e.exports=r},26826:e=>{"use strict";e.exports=o},48891:e=>{"use strict";e.exports=i}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={id:i,exports:{}};return e[i](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="",n.nc=void 0;var s={};return n.p=window.jimuConfig.baseUrl,(()=>{"use strict";n.r(s),n.d(s,{default:()=>b});var e=n(48891);const t={_widgetLabel:"Floor Filter",floorfilter_noMap:"Floor Filter",floorfilter_notFloorAware:"The selected map is not floor aware"};var i=n(26826),o=n(62830),r=n(93379),a=n.n(r),l=n(7795),c=n.n(l),d=n(90569),u=n.n(d),f=n(3565),p=n.n(f),h=n(19216),m=n.n(h),v=n(44589),g=n.n(v),w=n(31504),y={};y.styleTagTransform=g(),y.setAttributes=p(),y.insert=u().bind(null,"head"),y.domAPI=c(),y.insertStyleElement=m(),a()(w.Z,y),w.Z&&w.Z.locals&&w.Z.locals;class b extends e.React.PureComponent{constructor(e){super(e),this.clearHandles=e=>{Array.isArray(e)&&e.forEach((e=>{try{e&&e.remove()}catch(e){console.error(e)}}))},this.handleActiveViewChange=e=>{var t;this.setState({hadMap:!(!this.state.hadMap&&!(null===(t=null==e?void 0:e.view)||void 0===t?void 0:t.map)),jimuMapView:e})},this.hasFloorInfo=()=>{var e,t,i;return!!(null===(i=null===(t=null===(e=this.state.jimuMapView)||void 0===e?void 0:e.view)||void 0===t?void 0:t.map)||void 0===i?void 0:i.floorInfo)},this.hasMap=()=>{var e,t;return!!(null===(t=null===(e=this.state.jimuMapView)||void 0===e?void 0:e.view)||void 0===t?void 0:t.map)},this.nls=(e,i)=>this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:t[e]},i):e,this.state={hadMap:!1,jimuMapView:null,wasMounted:!1}}componentDidMount(){this.setState({wasMounted:!0})}componentDidUpdate(e,t){const i=this.state,o=this.props;i.wasMounted&&!t.wasMounted?this.loadCoreWidget():i.jimuMapView!==t.jimuMapView?i.wasMounted&&this.loadCoreWidget():o.config.longNames!==e.config.longNames?this.coreWidget&&(this.coreWidget.longNames=!!o.config.longNames):o.config.position!==e.config.position&&this.coreWidget&&this.coreWidget.scheduleRender()}componentWillUnmount(){this.destroyCoreWidget()}destroyCoreWidget(){if(this.coreWidget){const e=this.coreWidget.view;this.coreWidget.destroy(),this.coreWidget=null,e&&(e.floors=this.vwOriginalFloors||null)}this.vwHeightHandle&&(this.clearHandles([this.vwHeightHandle]),this.vwHeightHandle=null),this.vwWidthHandle&&(this.clearHandles([this.vwWidthHandle]),this.vwWidthHandle=null)}fixBreakpoints(e){setTimeout((()=>{var t;const i=null===(t=this.coreWidget)||void 0===t?void 0:t.viewModel;let o="large";try{document.documentElement.classList.contains("size-mode-MEDIUM")?o="medium":document.documentElement.classList.contains("size-mode-SMALL")&&(o="xsmall")}catch(e){console.error(e)}!i||"both"!==e&&"widthBreakpoint"!==e||(i._viewWidthBreakpoint=o),!i||"both"!==e&&"heightBreakpoint"!==e||(i._viewHeightBreakpoint=o)}),100)}loadCoreWidget(){if(this.coreContainer)if(this.hasFloorInfo()){this.destroyCoreWidget();const e=document.createElement("div");this.coreContainer.appendChild(e);const t=!!this.props.config.longNames,i=this.state.jimuMapView.view;this.coreWidget=new o.default({container:e,longNames:t,view:i}),this.coreWidget._getComponentPosition=()=>this.props.config.position||"top-left",this.vwOriginalFloors=i.floors&&i.floors.clone(),this.fixBreakpoints("both"),this.vwWidthHandle=i.watch("widthBreakpoint",(()=>{this.fixBreakpoints("widthBreakpoint")})),this.vwWidthHandle=i.watch("heightBreakpoint",(()=>{this.fixBreakpoints("heightBreakpoint")}))}else this.destroyCoreWidget()}render(){var t;const o=this.props.config.displayLabel?this.props.label:null,r=this.hasMap(),n=this.hasFloorInfo();let s;r?n||(s=this.nls("floorfilter_notFloorAware")):s=this.nls("floorfilter_noMap");let a="jimu-widget widget-floorfilter";return s&&(a+=" widget-floorfilter-nomap"),(0,e.jsx)("div",{className:a},(0,e.jsx)("h4",{className:"widget-floorfilter-header",style:{display:o?"block":"none"}},o),(0,e.jsx)("div",{className:"widget-floorfilter-msg",style:{display:s?"block":"none"}},(0,e.jsx)("span",{className:"esri-icon esri-icon-urban-model"}),(0,e.jsx)("span",{style:{margin:"0 8px"}},s)),(0,e.jsx)("div",{className:"widget-floorfilter-container",ref:e=>{this.coreContainer=e}}),(0,e.jsx)(i.JimuMapViewComponent,{useMapWidgetId:null===(t=this.props.useMapWidgetIds)||void 0===t?void 0:t[0],onActiveViewChange:this.handleActiveViewChange}))}}})(),s})())}}}));